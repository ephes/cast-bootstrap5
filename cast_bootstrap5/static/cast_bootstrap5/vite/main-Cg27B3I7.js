var L=Object.defineProperty;var S=(s,a,t)=>a in s?L(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var h=(s,a,t)=>S(s,typeof a!="symbol"?a+"":a,t);class p extends HTMLElement{constructor(){super();h(this,"currentImage");h(this,"currentModal");this.currentImage=null,this.currentModal=null}static register(t){console.log("Registering image-gallery-bs5!"),"customElements"in window&&customElements.define(t||"image-gallery-bs5",p)}replaceImage(t){if(this.currentImage){const e=this.currentImage.getAttribute(t);if(e==="false")return;const r=this.querySelector("#"+e);r&&this.setModalImage(r)}}resolveModal(t){if(t){const e=t.getAttribute("data-bs-target");if(e){const r=document.querySelector(e);if(r)return r}}return this.querySelector(".modal")}setModalImage(t,e){var y,v,k;if(this.currentImage=t,!t.parentNode){console.error("No parent node for image: ",t);return}const r=t.parentNode;if(!r.parentNode){console.error("No parent node for thumbnail picture: ",r);return}const c=(y=r.parentNode.getAttribute("data-full"))!=null?y:"",b=r.querySelector("source");if(!b){console.error("No thumbnail source for picture: ",r);return}const d=(v=e!=null?e:this.currentModal)!=null?v:this.resolveModal();if(!d){console.error("No modal for image gallery: ",this);return}this.currentModal=d;const n=d.querySelector(".modal-body");if(!n){console.error("No modal body for modal: ",this);return}console.log("modalBody: ",n);const f=d.querySelector(".modal-footer");if(!f){console.error("No modal footer for modal: ",this);return}const N=[{attr:"data-modal-srcset",prop:"srcset"},{attr:"data-modal-src",prop:"src"},{attr:"type",prop:"type"},{attr:"data-modal-sizes",prop:"sizes"}],g=n.querySelector("source");if(!g){console.error("No modal source for modal body: ",n);return}for(const{attr:u,prop:m}of N){const i=b.getAttribute(u);i&&g.setAttribute(m,i)}const A=[{attr:"alt",prop:"alt"},{attr:"data-prev",prop:"data-prev"},{attr:"data-next",prop:"data-next"},{attr:"data-modal-src",prop:"src"},{attr:"data-modal-srcset",prop:"srcset"},{attr:"data-modal-sizes",prop:"sizes"},{attr:"data-modal-height",prop:"height"},{attr:"data-modal-width",prop:"width"}],l=n.querySelector("img");if(!l){console.error("No modal image for modal body: ",n);return}((k=l.parentNode)==null?void 0:k.parentNode).setAttribute("href",c);for(const{attr:u,prop:m}of A){const i=t.getAttribute(u);i&&l.setAttribute(m,i)}let o="";l.getAttribute("data-prev")!=="false"?o=o+'<button id="data-prev" type="button" class="btn btn-primary">Prev</button>':o=o+'<button id="data-prev" type="button" class="btn btn-primary disabled">Prev</button>',l.getAttribute("data-next")!=="false"?o=o+'<button id="data-next" type="button" class="btn btn-primary">Next</button>':o=o+'<button id="data-next" type="button" class="btn btn-primary disabled">Next</button>',f.innerHTML=o}handleThumbnailClick(t){t.preventDefault();const e=t.currentTarget,r=e.querySelector("img");if(r){const c=this.resolveModal(e);this.setModalImage(r,c)}else console.error("No img element found in clicked thumbnail")}handleFooterClick(t){const e=t.target;e.matches("#data-prev, #data-next")&&this.replaceImage(e.id)}handleKeydown(t){t.key==="ArrowLeft"&&this.replaceImage("data-prev"),t.key==="ArrowRight"&&this.replaceImage("data-next")}connectedCallback(){this.querySelectorAll(".cast-gallery-container > a").forEach(r=>{r.classList.contains("event-added")||(r.addEventListener("click",this.handleThumbnailClick.bind(this)),r.classList.add("event-added"))});const e=this.querySelector(".modal-footer");e&&e.addEventListener("click",this.handleFooterClick.bind(this)),this.addEventListener("keydown",this.handleKeydown.bind(this))}disconnectedCallback(){this.querySelectorAll(".cast-gallery-container > a").forEach(r=>{r.removeEventListener("click",this.handleThumbnailClick)});const e=this.querySelector(".modal-footer");e&&e.removeEventListener("click",this.handleFooterClick),this.removeEventListener("keydown",this.handleKeydown)}}p.register("image-gallery-bs5");
