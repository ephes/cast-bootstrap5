function M(e){return e?"dark":"light"}const b="cast-theme",a="[data-cast-theme-switcher]",w="(prefers-color-scheme: dark)";let g=!1,d=null,p=null,m=null,T=null;function A(e){return e==="auto"||e==="light"||e==="dark"}function i(){return typeof document=="undefined"?null:document}function l(){return typeof window=="undefined"?null:window}function h(){const e=l();if(!e)return null;try{const t=e.localStorage.getItem(b);return A(t)?t:null}catch(t){return null}}function v(e){const t=l();if(t)try{t.localStorage.setItem(b,e)}catch(n){}}function L(e){if(e==="auto"){const t=l();return!t||typeof t.matchMedia!="function"?"light":M(t.matchMedia(w).matches)}return e}function y(e){const t=i(),n=L(e);return t&&t.documentElement.setAttribute("data-bs-theme",n),n}function q(e){const t=[];return e instanceof Element&&e.matches(a)&&t.push(e),t.push(...Array.from(e.querySelectorAll(a))),t}function C(e,t){const n=e.querySelector(`[data-cast-theme-mode="${t}"]`);if(!n)return null;const c=n.querySelector("span");return c!=null&&c.textContent?c.textContent.trim():n.textContent?n.textContent.trim():null}function x(e,t){const n=e.querySelector("[data-cast-theme-label]"),c=C(e,t);n&&c&&(n.textContent=c),e.querySelectorAll("[data-cast-theme-icon]").forEach(r=>{const E=r.getAttribute("data-cast-theme-icon");r.style.display=E===t?"inline-flex":"none"}),e.querySelectorAll("[data-cast-theme-mode]").forEach(r=>{const f=r.getAttribute("data-cast-theme-mode")===t;r.classList.toggle("active",f),r.setAttribute("aria-pressed",f?"true":"false");const S=r.querySelector(".cast-theme-check");S&&(S.style.opacity=f?"1":"0")})}function u(e=i()){var n;if(!e)return;const t=(n=h())!=null?n:"auto";q(e).forEach(c=>{x(c,t)})}function k(e){const t=e.getAttribute("data-cast-theme-value");if(!t)return;if(t.startsWith("mode:")){const s=t.slice(5);if(!A(s))return;v(s),y(s);const r=i();r&&u(r);return}if(!t.startsWith("theme:"))return;const n=t.slice(6),c=e.closest("form");if(!(c instanceof HTMLFormElement))return;const o=c.querySelector('input[name="template_base_dir"]');o&&(o.value=n),c.submit()}function H(){const e=i(),t=l();!e||!t||g||(p=n=>{const c=n.target;if(!(c instanceof Element))return;const o=c.closest("[data-cast-theme-value]");o&&(n.preventDefault(),k(o))},T=n=>{const c=n.detail,o=c==null?void 0:c.target;o instanceof Element&&(o.matches(a)||o.querySelector(a))&&u(o)},typeof t.matchMedia=="function"&&(d=t.matchMedia(w),m=()=>{const n=h();(!n||n==="auto")&&(y("auto"),u(e))}),e.body.addEventListener("click",p),e.body.addEventListener("htmx:afterSwap",T),d&&m&&d.addEventListener("change",m),g=!0)}function _(e=i()){var n;if(!e)return;const t=(n=h())!=null?n:"auto";y(t),u(e),H()}typeof document!="undefined"&&_();
