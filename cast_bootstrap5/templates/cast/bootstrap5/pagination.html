{% load i18n %}

{% if is_paginated %}
  <nav aria-label="Page navigation">
    <ul class="pagination">
      {% if has_previous %}
        <!-- previous page -->
        <li class="page-item page-control">
          <a
            data-hx-get="?page={{ previous_page_number }}{{ parameters }}"
            data-hx-target="#paging-area"
            data-hx-swap="innerHTML show:window:top transition:true"
            data-hx-sync="#paging-area:replace"
            data-hx-replace-url="true"
            href="?page={{ previous_page_number }}{{ parameters }}"
            class="page-link"
          >
            {% translate "Previous" %}
          </a>
        </li>
      {% else %}
        <!-- we are already on the first page -->
        <li class="page-item page-control disabled">
          <span class="page-link">
            {% translate "Previous" %}
          </span>
        </li>
      {% endif %}
      <!-- page numbers -->
      {% for num in page_range %}
        {# This boundary marker assumes paginator elision keeps first/last page numbers in page_range (on_ends >= 1). #}
        {% if num == ellipsis %}
          <!-- ... -->
          <li class="page-item page-ellipsis disabled">
            <span class="page-link">{{ num }}</span>
          </li>
        {% elif num == page_number %}
          <!-- currently active page -->
          <li class="page-item page-number{% if forloop.first or forloop.last %} page-number-boundary{% endif %} active">
            <span class="page-link">{{ num }}</span>
          </li>
        {% else %}
          <!-- clickable links to other page numbers -->
          <li class="page-item page-number{% if forloop.first or forloop.last %} page-number-boundary{% endif %}">
            <a
              data-hx-get="?page={{ num }}{{ parameters }}"
              data-hx-target="#paging-area"
              data-hx-swap="innerHTML show:window:top transition:true"
              data-hx-sync="#paging-area:replace"
              data-hx-replace-url="true"
              href="?page={{ num }}{{ parameters }}"
              class="page-link"
            >{{ num }}</a>
          </li>
        {% endif %}
      {% endfor %}
      {% if has_next %}
        <!-- next page -->
        <li class="page-item page-control">
          <a
            data-hx-get="?page={{ next_page_number }}{{ parameters }}"
            data-hx-target="#paging-area"
            data-hx-swap="innerHTML show:window:top transition:true"
            data-hx-sync="#paging-area:replace"
            data-hx-replace-url="true"
            href="?page={{ next_page_number }}{{ parameters }}"
            class="page-link"
          >
            {% translate "Next" %}
          </a>
        </li>
      {% else %}
        <!-- we are already on the last page -->
        <li class="page-item page-control disabled">
          <span class="page-link">
            {% translate "Next" %}
          </span>
        </li>
      {% endif %}
    </ul>
  </nav>
{% endif %}
